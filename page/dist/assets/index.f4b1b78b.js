import{ar as K,r as y,O as N,o as P,q as i,as as h,s as t,n as u,p as d,k as s,y as S,x as f,v as Q,aM as p,z as b,aN as U,F as j,aO as W,aP as L}from"./index.fb3f5ad5.js";import{Q as w}from"./QCardSection.4591ffd9.js";import{Q as O}from"./QSeparator.9cedb50e.js";import{Q as z}from"./QCardActions.5afa793e.js";import{Q as F}from"./QCard.2b2d4094.js";import{Q as I}from"./QInput.3afb05c8.js";import{Q as T}from"./QForm.9a518ac8.js";import{Q as G}from"./QDialog.fc5c29ed.js";import{g as H,p as J,a as R}from"./connection.6ce32872.js";import{l as X}from"./loading.1b32653b.js";import{n as Y}from"./no-data.7377e9ae.js";import{n as v}from"./notify.71f93eb9.js";import{u as Z}from"./vue-i18n.runtime.f4bab15f.js";import"./use-timeout.6c0c86b6.js";import"./uid.42677368.js";import"./use-transition.97bade2a.js";import"./use-portal.7095234a.js";import"./focusout.c6764dff.js";import"./axios.a0958352.js";import"./QInnerLoading.4e21fbf1.js";const C=x=>(W("data-v-f259643a"),x=x(),L(),x),ee={class:"row"},ae={class:"col-12 col-md-6"},te={class:"flex items-center justify-between"},se=C(()=>t("div",{class:"text-h3 text-weight-bold"}," AWS ",-1)),le={key:0,class:"row items-center"},oe={class:"text-h5"},ne={key:1,class:"row items-center"},re={class:"text-h5"},ie={class:"text-h5 text-weight-medium"},de=C(()=>t("div",null," Access Key",-1)),ce={class:"ellipsis"},ue={class:"text-h5 text-weight-medium"},me={class:"ellipsis"},_e=C(()=>t("div",{class:"text-h3 text-weight-bold"}," AWS ",-1)),ye={class:"flex items-center justify-between"},fe=C(()=>t("div",{class:"text-h3 text-weight-bold"}," AWS ",-1)),pe={class:"text-h6"},ve={key:0},ge={key:1},ke={class:"q-gutter-y-xs row"},he={class:"col-12"},be={class:"col-12"},we={class:"col-12"},g="connection.aws",xe={__name:"index",setup(x){const{t:r}=Z(),c=y(!0),$=y(!0),l=N({key:"",status:"",id:"",note:"",noData:!0}),V=y(null),o=y({access_key_id:"",secret_access_key:"",keytags_name:""}),A={access_key_id:[e=>e&&e.length>0||r("general.form.required")],secret_access_key:[e=>e&&e.length>0||r("general.form.required")],keytags_name:[!0]},D=()=>{c.value=!0,H().then(e=>{e.data.length===0?l.noData=!0:(l.noData=!1,l.key=e.data[0].access_key_id,l.status=e.data[0].status,l.id=e.data[0].id,l.note=e.data[0].keytags_name,o.value.access_key_id=e.data[0].access_key_id,o.value.keytags_name=e.data[0].keytags_name)}).catch(()=>{l.noData=!0}).finally(()=>{c.value=!1})},m=y(!1),k=y("add"),_=y(!1),E=()=>{k.value="add",m.value=!0},B=()=>{k.value="edit",o.value.secret_access_key="",o.value.access_key_id=l.key,o.value.keytags_name=l.note,m.value=!0},M=async()=>{await V.value.validate()?(_.value=!0,J(l.id,o.value).then(()=>{m.value=!1,v("success",r("general.form.notify.successfullyEdited")),D()}).catch(a=>{v("error",r("general.form.notify.failed2Edit"),a.response.data.detail)}).finally(()=>{_.value=!1})):v("error",r("general.form.notify.failed2Edit"),r("general.form.notify.verifyForm"))},q=async()=>{if(await V.value.validate()){_.value=!0;const a={access_key_id:o.value.access_key_id,secret_access_key:o.value.secret_access_key,keytags_name:o.value.keytags_name};R(a).then(()=>{m.value=!1,v("success",r("general.form.notify.successfullyAdded")),D()}).catch(n=>{v("error",r("general.form.notify.failed2Add"),n.response.data.detail)}).finally(()=>{_.value=!1})}else v("error",r("general.form.notify.failed2Add"),r("general.form.notify.verifyForm"))};return D(),P(()=>{}),(e,a)=>(i(),h(j,null,[t("div",ee,[t("div",ae,[l.noData===!1||c.value?(i(),u(F,{key:0,class:U(["my-card",l.status===1||c.value?"bg-green-6":"bg-red-6"])},{default:d(()=>[c.value?p("",!0):(i(),u(w,{key:0,class:"column text-yellow-1 pb-0"},{default:d(()=>[t("div",te,[se,l.status===1?(i(),h("div",le,[s(S,{class:"text-h3",color:"amber-1",name:"mdi-play-circle-outline"}),t("span",oe,f(Q(r)(`${g}.running`)),1)])):(i(),h("div",ne,[s(S,{class:"text-h3 cursor-pointer",color:"amber-1",name:"mdi-alert-circle-outline"}),t("span",re,f(Q(r)(`${g}.exception`)),1)]))])]),_:1})),c.value?p("",!0):(i(),u(w,{key:1,class:"column text-yellow-1 no-wrap"},{default:d(()=>[t("div",ie,[de,t("div",ce,f(l.key),1)]),t("div",ue,[t("div",me,f(e.$t(`${g}.note`))+":"+f(l.note),1)])]),_:1})),c.value?p("",!0):(i(),u(O,{key:2,class:"mt-2",color:"yellow-12",size:"5px"})),c.value?p("",!0):(i(),u(z,{key:3},{default:d(()=>[t("div",null,[s(b,{class:"mr-2 text-h6",color:"white",label:e.$t("general.btn.edit"),onClick:a[0]||(a[0]=n=>B()),flat:"","no-caps":""},null,8,["label"])])]),_:1})),c.value?(i(),u(w,{key:4,class:"card-height"},{default:d(()=>[_e,s(X,{class:"pa"})]),_:1})):p("",!0)]),_:1},8,["class"])):(i(),u(F,{key:1,class:"my-card bg-grey-4"},{default:d(()=>[s(w,{class:"column pb-0"},{default:d(()=>[t("div",ye,[fe,t("div",null,[s(b,{class:"mr-2",color:"primary",label:e.$t("general.btn.add"),onClick:a[1]||(a[1]=n=>E()),"no-caps":""},null,8,["label"])]),s(Y,{class:"my-4"})])]),_:1})]),_:1}))])]),s(G,{modelValue:m.value,"onUpdate:modelValue":a[9]||(a[9]=n=>m.value=n),persistent:""},{default:d(()=>[s(F,{style:{width:"450px"}},{default:d(()=>[s(w,null,{default:d(()=>[t("div",pe,[k.value==="add"?(i(),h("span",ve,f(Q(r)(`${g}.addTtile`)),1)):p("",!0),k.value==="edit"?(i(),h("span",ge,f(Q(r)(`${g}.editTtile`)),1)):p("",!0)]),s(T,{ref_key:"pageform",ref:V,greedy:""},{default:d(()=>[t("div",ke,[t("div",he,[s(I,{class:"",modelValue:o.value.access_key_id,"onUpdate:modelValue":a[2]||(a[2]=n=>o.value.access_key_id=n),modelModifiers:{trim:!0},"lazy-rules":"",rules:A.access_key_id,placeholder:e.$t("general.form.inputPlaceholder"),label:"Access Key"},null,8,["modelValue","rules","placeholder"])]),t("div",be,[s(I,{class:"",type:$.value?"password":"text",modelValue:o.value.secret_access_key,"onUpdate:modelValue":a[4]||(a[4]=n=>o.value.secret_access_key=n),modelModifiers:{trim:!0},"lazy-rules":"",rules:A.secret_access_key,placeholder:e.$t("general.form.inputPlaceholder"),label:"Secret Key"},{append:d(()=>[s(S,{name:$.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[3]||(a[3]=n=>$.value=!$.value)},null,8,["name"])]),_:1},8,["type","modelValue","rules","placeholder"])]),t("div",we,[s(I,{class:"",modelValue:o.value.keytags_name,"onUpdate:modelValue":a[5]||(a[5]=n=>o.value.keytags_name=n),modelModifiers:{trim:!0},"lazy-rules":"",rules:A.keytags_name,placeholder:e.$t("general.form.inputPlaceholder"),label:e.$t(`${g}.note`)},null,8,["modelValue","rules","placeholder","label"])])])]),_:1},512)]),_:1}),s(z,{align:"right"},{default:d(()=>[s(b,{color:"secondary",rounded:"",label:e.$t("general.btn.cancel"),disable:_.value,onClick:a[6]||(a[6]=n=>m.value=!1),"no-caps":""},null,8,["label","disable"]),k.value==="edit"?(i(),u(b,{key:0,color:"accent",rounded:"",label:e.$t("general.btn.edit"),loading:_.value,onClick:a[7]||(a[7]=n=>M()),"no-caps":""},null,8,["label","loading"])):(i(),u(b,{key:1,color:"accent",rounded:"","no-caps":"",label:e.$t("general.btn.add"),loading:_.value,onClick:a[8]||(a[8]=n=>q())},null,8,["label","loading"]))]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Le=K(xe,[["__scopeId","data-v-f259643a"]]);export{Le as default};
