import{Q as E}from"./QInput.3afb05c8.js";import{ar as N,r as u,f as S,o as K,q as d,as as c,k as l,p as r,s as m,x as f,cw as j,z as p,v as q,y as $,B as H,A as L,av as M,aM as O,F as G}from"./index.fb3f5ad5.js";import{Q as R}from"./QCardSection.4591ffd9.js";import{Q as U}from"./QCard.2b2d4094.js";import{Q as v}from"./QTd.417aa865.js";import{l as W,n as J,Q as X}from"./no-data.2e8b8955.js";import{u as Y}from"./permission.2824d1cc.js";import{j as Z,a as ee}from"./aws.035e7a22.js";import{f as ae}from"./table-filter.7923a56f.js";import{n as k}from"./notify.71f93eb9.js";import{f as te}from"./format-time.e227a64b.js";import{u as le}from"./vue-i18n.runtime.f4bab15f.js";import"./use-timeout.6c0c86b6.js";import"./uid.42677368.js";import"./use-transition.97bade2a.js";import"./QSeparator.9cedb50e.js";import"./QList.e0faa10e.js";import"./QSelect.650daa0f.js";import"./QMenu.0d0ddedc.js";import"./position-engine.d6f8c41b.js";import"./selection.2af613b2.js";import"./use-portal.7095234a.js";import"./focusout.c6764dff.js";import"./QDialog.fc5c29ed.js";import"./rtl.b51694b1.js";import"./format.c860d4da.js";import"./QInnerLoading.4e21fbf1.js";import"./axios.a0958352.js";const se={class:"row q-col-gutter-md"},oe={class:"col-12 col-sm-5"},re={class:"col-12 col-sm-7 row items-end"},ne={key:0,class:"mb-4 row justify-end"},ie={key:1,class:"null-h52-block"},de={key:0,class:"text-green-8"},ce={key:1,class:"text-grey-8"},me={key:0,class:"ma-10 pa-10"},n="resource.aws.ebs",ue={__name:"index",setup(be){const{t:o,te:C}=le(),y=Y(),i=u(!0),I=S(()=>{const e=[{name:"name",align:"left",label:o(`${n}.name`),field:"name",headerClasses:"table-header",classes:"table-body"},{name:"volumeId",align:"left",label:o(`${n}.volumeId`),field:"VolumeId",headerClasses:"table-header",classes:"table-body"},{name:"volumeType",align:"left",label:o(`${n}.type`),field:"VolumeType",headerClasses:"table-header",classes:"table-body"},{name:"size",align:"left",label:o(`${n}.size`),field:"Size",headerClasses:"table-header",classes:"table-body",sortable:!0},{name:"iops",align:"left",label:"IOPS",field:"Iops",headerClasses:"table-header",classes:"table-body",sortable:!0},{name:"attachments",align:"left",label:o(`${n}.attachments`),field:"uiFormatAttachments",headerClasses:"table-header",classes:"table-body"},{name:"state",align:"left",label:o(`${n}.state`),field:"uiFormatStateI18n",headerClasses:"table-header",classes:"table-body"},{name:"createTime",align:"left",label:o(`${n}.createTime`),field:"formatCreateTime",headerClasses:"table-header",classes:"table-body",sortable:!0,filter:!1}];return y.role==="supervisor"&&e.push({name:"detail",align:"left",label:o("resource.aws.detail"),field:"detail",headerClasses:"table-header",classes:"table-body",filter:!1}),e}),F={rowsPerPage:10,sortBy:"",descending:!0},T=[0,10,20],b=u(""),g=u(""),_=()=>{g.value=b.value,s.value=[],w()},A=()=>{b.value="",Q.value="all"},Q=u("all"),z=(e,a,t)=>ae(t,e,a),V=S(()=>(s.value.forEach((e,a)=>{if(e.State===null?(s.value[a].uiFormatState="",s.value[a].uiFormatStateI18n=""):(s.value[a].uiFormatState=e.State,s.value[a].uiFormatStateI18n=C(`${n}.${e.State}`)?o(`${n}.${e.State}`):e.State),e.Attachments.length===0)s.value[a].uiFormatAttachments="";else{let t="";e.Attachments.forEach((h,x)=>{e.Attachments.length===x+1?t+=h.InstanceId:t+=`${h.InstanceId},`}),s.value[a].uiFormatAttachments=t}s.value[a].formatCreateTime=te(e.CreateTime)}),s.value)),s=u([]),w=()=>{i.value=!0,Z().then(e=>{s.value=e.data}).finally(()=>{i.value=!1})},B=()=>{ee("/volumes/ebs").then(e=>{k("success",o("resource.aws.successfullyAsync"))}).catch(e=>{k("error",o("resource.aws.failed2Async"),e.response.data.detail)})},D=()=>!!(s.value.length===0&&i.value),P=e=>{window.open(e,"_blank")};return w(),K(()=>{}),(e,a)=>(d(),c(G,null,[l(U,{class:"bg-grey-11 shadow-1 mb-4 text-weight-medium"},{default:r(()=>[l(R,null,{default:r(()=>[m("div",se,[m("div",oe,[m("div",null,f(e.$t("general.table.keyword")),1),l(E,{dense:"",placeholder:e.$t("general.table.enterKeyword"),modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=t=>b.value=t),onKeyup:a[1]||(a[1]=j(t=>_(),["enter"]))},null,8,["placeholder","modelValue"])]),m("div",re,[l(p,{class:"mr-2",color:"primary",icon:"mdi-magnify",label:e.$t("general.btn.search"),onClick:a[2]||(a[2]=t=>_()),rounded:"","no-caps":""},null,8,["label"]),l(p,{color:"secondary",icon:"mdi-eraser",label:e.$t("general.btn.reset"),onClick:a[3]||(a[3]=t=>A()),rounded:"","no-caps":""},null,8,["label"])])])]),_:1})]),_:1}),q(y).role==="supervisor"?(d(),c("div",ne,[l(p,{class:"",color:"accent",icon:"mdi-cloud-sync-outline",label:e.$t("general.btn.schedule"),onClick:a[4]||(a[4]=t=>B()),rounded:"","no-caps":""},null,8,["label"])])):(d(),c("div",ie)),l(X,{"card-class":"customer-table",rows:V.value,columns:I.value,"row-key":"id",loading:i.value,"loading-label":" ","hide-bottom":D(),pagination:F,"rows-per-page-options":T,filter:g.value,"filter-method":z},{"body-cell-state":r(t=>[l(v,{class:"table-body"},{default:r(()=>[t.row.State==="in-use"?(d(),c("div",de,[l($,{size:"24px",name:"mdi-check-circle-outline"}),m("span",null,f(t.row.uiFormatStateI18n),1)])):(d(),c("div",ce,[l($,{size:"24px",name:"mdi-minus-circle-outline"}),m("span",null,f(t.row.uiFormatStateI18n),1)]))]),_:2},1024)]),"body-cell-size":r(t=>[l(v,{class:"table-body"},{default:r(()=>[H(f(t.row.Size)+" Gib ",1)]),_:2},1024)]),"body-cell-detail":r(t=>[l(v,{class:"table-body"},{default:r(()=>[l(p,{class:"mr-1",color:"primary",icon:"mdi-link-variant",size:"sm",rounded:"","no-caps":"",onClick:h=>P(t.row.detail_link)},null,8,["onClick"])]),_:2},1024)]),loading:r(()=>[L(l(W,null,null,512),[[M,i.value]])]),"bottom-row":r(()=>[i.value&&s.value.length===0?(d(),c("div",me)):O("",!0)]),"no-data":r(()=>[l(J)]),_:1},8,["rows","columns","loading","hide-bottom","filter"])],64))}};var He=N(ue,[["__scopeId","data-v-ab989d64"]]);export{He as default};
