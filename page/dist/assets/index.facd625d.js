import{Q as A}from"./QInput.3afb05c8.js";import{r as d,f as X,o as Y,q as c,as as V,k as a,p as t,s as r,x as m,cw as ee,z as i,n as D,B as P,A as le,av as ae,aM as B,v as F,y as oe,F as te,Z as ne}from"./index.fb3f5ad5.js";import{Q as T}from"./QCardSection.4591ffd9.js";import{Q as _}from"./QCard.2b2d4094.js";import{Q as U}from"./QSelect.650daa0f.js";import{Q as G}from"./QTd.417aa865.js";import{l as se,n as re,Q as de}from"./no-data.2e8b8955.js";import{Q as ie}from"./QForm.9a518ac8.js";import{Q as I}from"./QCardActions.5afa793e.js";import{Q as M}from"./QDialog.fc5c29ed.js";import{g as ue,p as ce,a as me,d as fe}from"./group.eb0cc308.js";import{n as f}from"./notify.71f93eb9.js";import{u as pe}from"./vue-i18n.runtime.f4bab15f.js";import"./use-timeout.6c0c86b6.js";import"./uid.42677368.js";import"./use-transition.97bade2a.js";import"./QMenu.0d0ddedc.js";import"./position-engine.d6f8c41b.js";import"./selection.2af613b2.js";import"./use-portal.7095234a.js";import"./focusout.c6764dff.js";import"./rtl.b51694b1.js";import"./format.c860d4da.js";import"./QSeparator.9cedb50e.js";import"./QList.e0faa10e.js";import"./QInnerLoading.4e21fbf1.js";import"./axios.a0958352.js";const ve={class:"row q-col-gutter-md"},ge={class:"col-12 col-sm-5"},be={class:"col-12 col-sm-7 row items-end"},ye={class:"mb-4 row justify-end"},he={key:0,class:"ma-10 pa-10"},$e={class:"text-h6"},ke={key:0},we={key:1},Ce={class:"q-gutter-y-xs row"},Qe={class:"col-12"},Ve={class:"col-12"},De={class:"text-h6"},Fe={class:"text-h6"},p="UserCenter.group",al={__name:"index",setup(Te){const{t:n}=pe(),g=d(!0),N=X(()=>[{name:"name",align:"left",label:n(`${p}.name`),field:"name",headerClasses:"table-header",classes:"table-body"},{name:"description",align:"left",label:n(`${p}.description`),field:"description",headerClasses:"table-header",classes:"table-body"},{name:"actions",align:"left",label:n("general.table.actions"),field:"actions",headerClasses:"table-header",classes:"table-body",filter:!1}]),S={rowsPerPage:10,sortBy:"updatedTime",descending:!0},j=[0,10,20],k=d(""),q=d(""),z=()=>{q.value=k.value,b.value=[],y()},K=()=>{k.value=""},b=d([]),y=()=>{g.value=!0,ue().then(l=>{b.value=l.data}).finally(()=>{g.value=!1})},O=()=>!!(b.value.length===0&&g.value),v=d(!1),h=d("add"),s=d(!1),w=d(null),u=d({name:"",description:""}),E={name:[l=>l&&l.length>0||n("general.form.required")],description:[!0]},x=()=>{h.value="add",v.value=!0,s.value=!1,u.value.name="",u.value.description="",ne(()=>{w.value.reset()})};let C={};const L=l=>{h.value="edit",v.value=!0,s.value=!1,C=l,u.value={name:C.name,description:C.description}},R=async()=>{await w.value.validate()?(s.value=!0,ce(u.value).then(e=>{v.value=!1,f("success",n("general.form.notify.successfullyAdded")),y()}).catch(e=>{f("error",n("general.form.notify.failed2Add"),e.response.data.detail)}).finally(()=>{s.value=!1})):f("error",n("general.form.notify.failed2Add"),n("general.form.notify.verifyForm"))},W=async()=>{await w.value.validate()?(s.value=!0,me(C.id,u.value).then(e=>{v.value=!1,f("success",n("general.form.notify.successfullyEdited")),y()}).catch(e=>{f("error",n("general.form.notify.failed2Edit"),e.response.data.detail)}).finally(()=>{s.value=!1})):f("error",n("general.form.notify.failed2Edit"),n("general.form.notify.verifyForm"))},$=d(!1),Q=d({name:"",id:""}),Z=l=>{Q.value.id=l.id,Q.value.name=l.name,$.value=!0,s.value=!1},H=()=>{s.value=!0,fe(Q.value.id).then(l=>{$.value=!1,f("success",n("general.form.notify.successfullyDelete")),y()}).catch(l=>{f("error",n("general.form.notify.failed2Delete"),l.response.data.detail)}).finally(()=>{s.value=!1})};return y(),Y(()=>{}),(l,e)=>(c(),V(te,null,[a(_,{class:"bg-grey-11 shadow-1 mb-4 text-weight-medium"},{default:t(()=>[a(T,null,{default:t(()=>[r("div",ve,[r("div",ge,[r("div",null,m(l.$t("general.table.keyword")),1),a(A,{dense:"",placeholder:l.$t("general.table.enterKeyword"),modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=o=>k.value=o),onKeyup:e[1]||(e[1]=ee(o=>z(),["enter"]))},null,8,["placeholder","modelValue"])]),r("div",be,[a(i,{class:"mr-2",color:"primary",icon:"mdi-magnify",label:l.$t("general.btn.search"),onClick:e[2]||(e[2]=o=>z()),rounded:"","no-caps":""},null,8,["label"]),a(i,{color:"secondary",icon:"mdi-eraser",label:l.$t("general.btn.reset"),onClick:e[3]||(e[3]=o=>K()),rounded:"","no-caps":""},null,8,["label"])])])]),_:1})]),_:1}),r("div",ye,[a(i,{class:"",color:"accent",icon:"mdi-plus-circle-outline",label:l.$t("general.btn.add"),onClick:e[4]||(e[4]=o=>x()),rounded:"","no-caps":""},null,8,["label"])]),a(de,{"card-class":"customer-table",rows:b.value,columns:N.value,"row-key":"id",loading:g.value,"loading-label":" ","hide-bottom":O(),pagination:S,"rows-per-page-options":j,filter:q.value},{"body-cell-status":t(o=>[a(G,{class:"table-body"},{default:t(()=>[o.row.is_active?(c(),D(U,{key:0,color:"info","text-color":"white",icon:"mdi-play",square:""},{default:t(()=>[P(m(l.$t("general.status.enabled")),1)]),_:1})):(c(),D(U,{key:1,square:"",color:"warning","text-color":"white",icon:"mdi-alert-outline"},{default:t(()=>[P(m(l.$t("general.status.disabled")),1)]),_:1}))]),_:2},1024)]),"body-cell-actions":t(o=>[a(G,{class:"table-body"},{default:t(()=>[a(i,{class:"mr-1",color:"primary",label:l.$t("general.table.edit"),size:"12px",onClick:J=>L(o.row),"no-caps":""},null,8,["label","onClick"]),a(i,{color:"negative",label:l.$t("general.btn.delete"),size:"12px",onClick:J=>Z(o.row),"no-caps":""},null,8,["label","onClick"])]),_:2},1024)]),loading:t(()=>[le(a(se,null,null,512),[[ae,g.value]])]),"bottom-row":t(()=>[g.value&&b.value.length===0?(c(),V("div",he)):B("",!0)]),"no-data":t(()=>[a(re)]),_:1},8,["rows","columns","loading","hide-bottom","filter"]),a(M,{modelValue:v.value,"onUpdate:modelValue":e[10]||(e[10]=o=>v.value=o),persistent:""},{default:t(()=>[a(_,{style:{"min-width":"450px"}},{default:t(()=>[a(T,null,{default:t(()=>[r("div",$e,[h.value==="add"?(c(),V("span",ke,m(F(n)(`${p}.addTtile`)),1)):B("",!0),h.value==="edit"?(c(),V("span",we,m(F(n)(`${p}.editTtile`)),1)):B("",!0)]),a(ie,{ref_key:"pageform",ref:w,greedy:""},{default:t(()=>[r("div",Ce,[r("div",Qe,[a(A,{class:"col",modelValue:u.value.name,"onUpdate:modelValue":e[5]||(e[5]=o=>u.value.name=o),modelModifiers:{trim:!0},placeholder:l.$t("general.form.inputPlaceholder"),"lazy-rules":"",rules:E.name,label:l.$t(`${p}.name`)},null,8,["modelValue","placeholder","rules","label"])]),r("div",Ve,[a(A,{class:"col",modelValue:u.value.description,"onUpdate:modelValue":e[6]||(e[6]=o=>u.value.description=o),modelModifiers:{trim:!0},placeholder:l.$t("general.form.inputPlaceholder"),"lazy-rules":"",label:l.$t(`${p}.description`),rules:E.description},null,8,["modelValue","placeholder","label","rules"])])])]),_:1},512)]),_:1}),a(I,{align:"right"},{default:t(()=>[a(i,{color:"secondary",rounded:"",label:l.$t("general.btn.cancel"),disable:s.value,onClick:e[7]||(e[7]=o=>v.value=!1),"no-caps":""},null,8,["label","disable"]),h.value==="add"?(c(),D(i,{key:0,color:"accent",rounded:"",label:l.$t("general.btn.add"),loading:s.value,onClick:e[8]||(e[8]=o=>R()),"no-caps":""},null,8,["label","loading"])):(c(),D(i,{key:1,color:"accent",rounded:"",label:l.$t("general.btn.edit"),loading:s.value,onClick:e[9]||(e[9]=o=>W()),"no-caps":""},null,8,["label","loading"]))]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(M,{modelValue:$.value,"onUpdate:modelValue":e[13]||(e[13]=o=>$.value=o),persistent:""},{default:t(()=>[a(_,{style:{"min-width":"450px"}},{default:t(()=>[a(T,null,{default:t(()=>[r("div",De,[a(oe,{name:"mdi-alert",class:"text-orange mr-1",size:"28px"}),r("span",null,m(F(n)(`${p}.deleteTtile`))+" ("+m(Q.value.name)+")",1)])]),_:1}),a(T,{class:"pt-0"},{default:t(()=>[r("div",Fe,[r("span",null,m(F(n)(`${p}.deleteContent`)),1)])]),_:1}),a(I,{align:"center"},{default:t(()=>[a(i,{color:"secondary",rounded:"",label:l.$t("general.btn.cancel"),disable:s.value,onClick:e[11]||(e[11]=o=>$.value=!1),"no-caps":""},null,8,["label","disable"]),a(i,{color:"accent",rounded:"",label:l.$t("general.btn.confirm"),loading:s.value,onClick:e[12]||(e[12]=o=>H()),"no-caps":""},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{al as default};
