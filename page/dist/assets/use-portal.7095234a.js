import{w as Q,ai as G,o as T,g as U,Z as _,aj as m,r as E,c as $,W as j,h as q,ak as w,al as A,am as D}from"./index.fb3f5ad5.js";import{c as F,d as H}from"./use-transition.97bade2a.js";const N={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},B=["beforeShow","show","beforeHide","hide"];function C({showing:e,canShow:o,hideOnRouteChange:t,handleShow:d,handleHide:i,processOnMount:r}){const s=U(),{props:a,emit:u,proxy:P}=s;let n;function c(l){e.value===!0?g(l):p(l)}function p(l){if(a.disable===!0||l!==void 0&&l.qAnchorHandled===!0||o!==void 0&&o(l)!==!0)return;const f=a["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!0),n=l,_(()=>{n===l&&(n=void 0)})),(a.modelValue===null||f===!1)&&V(l)}function V(l){e.value!==!0&&(e.value=!0,u("beforeShow",l),d!==void 0?d(l):u("show",l))}function g(l){if(a.disable===!0)return;const f=a["onUpdate:modelValue"]!==void 0;f===!0&&(u("update:modelValue",!1),n=l,_(()=>{n===l&&(n=void 0)})),(a.modelValue===null||f===!1)&&h(l)}function h(l){e.value!==!1&&(e.value=!1,u("beforeHide",l),i!==void 0?i(l):u("hide",l))}function M(l){a.disable===!0&&l===!0?a["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!1):l===!0!==e.value&&(l===!0?V:h)(n)}Q(()=>a.modelValue,M),t!==void 0&&G(s)===!0&&Q(()=>P.$route.fullPath,()=>{t.value===!0&&e.value===!0&&g()}),r===!0&&T(()=>{M(a.modelValue)});const v={show:p,hide:g,toggle:c};return Object.assign(P,v),v}const b=[];function L(e){return b.find(o=>o.contentEl!==null&&o.contentEl.contains(e))}function I(e,o){do{if(e.$options.name==="QMenu"){if(e.hide(o),e.$props.separateClosePopup===!0)return m(e)}else if(e.__qPortal===!0){const t=m(e);return t!==void 0&&t.$options.name==="QPopupProxy"?(e.hide(o),t):e}e=m(e)}while(e!=null)}function S(e,o,t){for(;t!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(t--,e.$options.name==="QMenu"){e=I(e,o);continue}e.hide(o)}e=m(e)}}function O(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Z(e,o,t,d){const i=E(!1),r=E(!1);let s=null;const a={},u=d==="dialog"&&O(e);function P(c){if(c===!0){F(a),r.value=!0;return}r.value=!1,i.value===!1&&(u===!1&&s===null&&(s=A(!1,d)),i.value=!0,b.push(e.proxy),H(a))}function n(c){if(r.value=!1,c!==!0)return;F(a),i.value=!1;const p=b.indexOf(e.proxy);p!==-1&&b.splice(p,1),s!==null&&(D(s),s=null)}return $(()=>{n(!0)}),e.proxy.__qPortal=!0,j(e.proxy,"contentEl",()=>o.value),{showPortal:P,hidePortal:n,portalIsActive:i,portalIsAccessible:r,renderPortal:()=>u===!0?t():i.value===!0?[q(w,{to:s},t())]:void 0}}export{B as a,C as b,Z as c,I as d,S as e,L as g,b as p,N as u};
