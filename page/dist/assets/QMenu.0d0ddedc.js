import{C as B,f as n,h as m,G as R,a5 as re,a6 as ce,r as C,a7 as de,Y as G,a8 as ve,g as Y,w as W,a9 as fe,aa as me,E as ge,D as be,ab as he}from"./index.fb3f5ad5.js";import{u as z,a as J,b as ke,c as qe}from"./use-timeout.6c0c86b6.js";import{u as ye,v as $,a as xe,b as Ce,c as Be,r as j,s as Se,p as N,d as Pe}from"./position-engine.d6f8c41b.js";import{u as Te,a as _e,b as Ee,c as we,d as Oe}from"./use-portal.7095234a.js";import{u as Fe,b as Re,a as Le}from"./use-transition.97bade2a.js";import{a as Ke,r as Ae,b as U,c as De}from"./focusout.c6764dff.js";var je=B({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:c}){const o=n(()=>parseInt(e.lines,10)),r=n(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(o.value===1?" ellipsis":"")),i=n(()=>e.lines!==void 0&&o.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o.value}:null);return()=>m("div",{style:i.value,class:r.value},R(c.default))}}),Ne=B({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:c}){const o=n(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>m("div",{class:o.value},R(c.default))}}),Ue=B({name:"QItem",props:{...z,...re,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:c,emit:o}){const{proxy:{$q:r}}=Y(),i=J(e,r),{hasLink:d,linkAttrs:v,linkClass:g,linkTag:y,navigateOnClick:b}=ce(),l=C(null),u=C(null),s=n(()=>e.clickable===!0||d.value===!0||e.tag==="label"),f=n(()=>e.disable!==!0&&s.value===!0),S=n(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(i.value===!0?" q-item--dark":"")+(d.value===!0&&e.active===null?g.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(f.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),P=n(()=>{if(e.insetLevel===void 0)return null;const a=r.lang.rtl===!0?"Right":"Left";return{["padding"+a]:16+e.insetLevel*56+"px"}});function T(a){f.value===!0&&(u.value!==null&&(a.qKeyEvent!==!0&&document.activeElement===l.value?u.value.focus():document.activeElement===u.value&&l.value.focus()),b(a))}function x(a){if(f.value===!0&&de(a,[13,32])===!0){G(a),a.qKeyEvent=!0;const h=new MouseEvent("click",a);h.qKeyEvent=!0,l.value.dispatchEvent(h)}o("keyup",a)}function _(){const a=ve(c.default,[]);return f.value===!0&&a.unshift(m("div",{class:"q-focus-helper",tabindex:-1,ref:u})),a}return()=>{const a={ref:l,class:S.value,style:P.value,role:"listitem",onClick:T,onKeyup:x};return f.value===!0?(a.tabindex=e.tabindex||"0",Object.assign(a,v.value)):s.value===!0&&(a["aria-disabled"]="true"),m(y.value,a,_())}}}),Ge=B({name:"QMenu",inheritAttrs:!1,props:{...ye,...Te,...z,...Fe,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:$},self:{type:String,validator:$},offset:{type:Array,validator:xe},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[..._e,"click","escapeKey"],setup(e,{slots:c,emit:o,attrs:r}){let i=null,d,v,g;const y=Y(),{proxy:b}=y,{$q:l}=b,u=C(null),s=C(!1),f=n(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),S=J(e,l),{registerTick:P,removeTick:T}=ke(),{registerTimeout:x}=qe(),{transitionProps:_,transitionStyle:a}=Re(e),{localScrollTarget:h,changeScrollEvent:V,unconfigureScrollTarget:X}=Ce(e,I),{anchorEl:k,canShow:Z}=Be({showing:s}),{hide:L}=Ee({showing:s,canShow:Z,handleShow:ne,handleHide:oe,hideOnRouteChange:f,processOnMount:!0}),{showPortal:K,hidePortal:A,renderPortal:p}=we(y,u,ue,"menu"),E={anchorEl:k,innerRef:u,onClickOutside(t){if(e.persistent!==!0&&s.value===!0)return L(t),(t.type==="touchstart"||t.target.classList.contains("q-dialog__backdrop"))&&G(t),!0}},D=n(()=>N(e.anchor||(e.cover===!0?"center middle":"bottom start"),l.lang.rtl)),ee=n(()=>e.cover===!0?D.value:N(e.self||"top start",l.lang.rtl)),te=n(()=>(e.square===!0?" q-menu--square":"")+(S.value===!0?" q-menu--dark q-dark":"")),ae=n(()=>e.autoClose===!0?{onClick:le}:{}),M=n(()=>s.value===!0&&e.persistent!==!0);W(M,t=>{t===!0?(De(O),Pe(E)):(U(O),j(E))});function w(){Le(()=>{let t=u.value;t&&t.contains(document.activeElement)!==!0&&(t=t.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.querySelector("[autofocus], [data-autofocus]")||t,t.focus({preventScroll:!0}))})}function ne(t){if(i=e.noRefocus===!1?document.activeElement:null,Ke(H),K(),I(),d=void 0,t!==void 0&&(e.touchPosition||e.contextMenu)){const F=fe(t);if(F.left!==void 0){const{top:ie,left:se}=k.value.getBoundingClientRect();d={left:F.left-se,top:F.top-ie}}}v===void 0&&(v=W(()=>l.screen.width+"|"+l.screen.height+"|"+e.self+"|"+e.anchor+"|"+l.lang.rtl,q)),e.noFocus!==!0&&document.activeElement.blur(),P(()=>{q(),e.noFocus!==!0&&w()}),x(()=>{l.platform.is.ios===!0&&(g=e.autoClose,u.value.click()),q(),K(!0),o("show",t)},e.transitionDuration)}function oe(t){T(),A(),Q(!0),i!==null&&(t===void 0||t.qClickOutside!==!0)&&(((t&&t.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),x(()=>{A(!0),o("hide",t)},e.transitionDuration)}function Q(t){d=void 0,v!==void 0&&(v(),v=void 0),(t===!0||s.value===!0)&&(Ae(H),X(),j(E),U(O)),t!==!0&&(i=null)}function I(){(k.value!==null||e.scrollTarget!==void 0)&&(h.value=me(k.value,e.scrollTarget),V(h.value,q))}function le(t){g!==!0?(Oe(b,t),o("click",t)):g=!1}function H(t){M.value===!0&&e.noFocus!==!0&&he(u.value,t.target)!==!0&&w()}function O(t){o("escapeKey"),L(t)}function q(){Se({targetEl:u.value,offset:e.offset,anchorEl:k.value,anchorOrigin:D.value,selfOrigin:ee.value,absoluteOffset:d,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ue(){return m(ge,_.value,()=>s.value===!0?m("div",{role:"menu",...r,ref:u,tabindex:-1,class:["q-menu q-position-engine scroll"+te.value,r.class],style:[r.style,a.value],...ae.value},R(c.default)):null)}return be(Q),Object.assign(b,{focus:w,updatePosition:q}),p}});export{Ge as Q,Ue as a,Ne as b,je as c};
