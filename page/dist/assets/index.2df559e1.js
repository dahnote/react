import{ar as N,r as f,O as j,o as P,q as s,as as b,s as l,n as u,p as i,k as t,y as V,x as y,v as C,aM as v,z as k,aN as U,F as L,aO as O,aP as T}from"./index.fb3f5ad5.js";import{Q as w}from"./QCardSection.4591ffd9.js";import{Q as K}from"./QSeparator.9cedb50e.js";import{Q as A}from"./QCardActions.5afa793e.js";import{Q as D}from"./QCard.2b2d4094.js";import{Q as E}from"./QInput.3afb05c8.js";import{Q as G}from"./QForm.9a518ac8.js";import{Q as H}from"./QDialog.fc5c29ed.js";import{c as J,d as R,e as W}from"./connection.6ce32872.js";import{l as X}from"./loading.1b32653b.js";import{n as Y}from"./no-data.7377e9ae.js";import{n as g}from"./notify.71f93eb9.js";import{u as Z}from"./vue-i18n.runtime.f4bab15f.js";import"./use-timeout.6c0c86b6.js";import"./uid.42677368.js";import"./use-transition.97bade2a.js";import"./use-portal.7095234a.js";import"./focusout.c6764dff.js";import"./axios.a0958352.js";import"./QInnerLoading.4e21fbf1.js";const F=$=>(O("data-v-65c58d6f"),$=$(),T(),$),ee={class:"row"},ae={class:"col-12 col-md-6"},le={class:"flex items-center justify-between"},te=F(()=>l("div",{class:"text-h3 text-weight-bold"}," iServCloud ",-1)),oe={key:0,class:"row items-center"},se={class:"text-h5"},ne={key:1,class:"row items-center"},ie={class:"text-h5"},re={class:"text-h5 text-weight-medium"},ce={class:"ellipsis"},de=F(()=>l("div",{class:"text-h3 text-weight-bold"}," iServCloud ",-1)),ue={class:"flex items-center justify-between"},me=F(()=>l("div",{class:"text-h3 text-weight-bold"}," iServCloud ",-1)),pe={class:"text-h6"},fe={key:0},ve={key:1},_e={class:"q-gutter-y-xs row"},ye={class:"col-12"},ge={class:"col-12"},_="connection.iservcloud",he={__name:"index",setup($){const{t:o}=Z(),x=f(!0),d=f(!0),r=j({client_acc:"",status:"",id:"",noData:!0}),Q=f(null),c=f({client_acc:"",client_pass:""}),I={client_acc:[e=>e&&e.length>0||o("general.form.required")],client_pass:[e=>e&&e.length>0||o("general.form.required")]},S=()=>{d.value=!0,J().then(e=>{e.data.length===0?r.noData=!0:(r.noData=!1,r.client_acc=e.data[0].client_acc,r.status=e.data[0].status,r.id=e.data[0].id,c.value.client_acc=e.data[0].client_acc)}).catch(()=>{r.noData=!0}).finally(()=>{d.value=!1})},m=f(!1),h=f("add"),p=f(!1),z=()=>{h.value="add",m.value=!0},B=()=>{h.value="edit",c.value.client_pass="",c.value.client_acc=r.client_acc,m.value=!0},q=async()=>{await Q.value.validate()?(p.value=!0,R(r.id,c.value).then(()=>{m.value=!1,g("success",o("general.form.notify.successfullyEdited")),S()}).catch(a=>{g("error",o("general.form.notify.failed2Edit"),a.response.data.detail)}).finally(()=>{p.value=!1})):g("error",o("general.form.notify.failed2Edit"),o("general.form.notify.verifyForm"))},M=async()=>{if(await Q.value.validate()){p.value=!0;const a={client_acc:c.value.client_acc,client_pass:c.value.client_pass};W(a).then(()=>{m.value=!1,g("success",o("general.form.notify.successfullyAdded")),S()}).catch(n=>{g("error",o("general.form.notify.failed2Add"),n.response.data.detail)}).finally(()=>{p.value=!1})}else g("error",o("general.form.notify.failed2Add"),o("general.form.notify.verifyForm"))};return S(),P(()=>{}),(e,a)=>(s(),b(L,null,[l("div",ee,[l("div",ae,[r.noData===!1||d.value?(s(),u(D,{key:0,class:U(["my-card",r.status===1||d.value?"bg-green-6":"bg-red-6"])},{default:i(()=>[d.value?v("",!0):(s(),u(w,{key:0,class:"column text-yellow-1 pb-0"},{default:i(()=>[l("div",le,[te,r.status===1?(s(),b("div",oe,[t(V,{class:"text-h3",color:"amber-1",name:"mdi-play-circle-outline"}),l("span",se,y(C(o)(`${_}.running`)),1)])):(s(),b("div",ne,[t(V,{class:"text-h3 cursor-pointer",color:"amber-1",name:"mdi-alert-circle-outline"}),l("span",ie,y(C(o)(`${_}.exception`)),1)]))])]),_:1})),d.value?v("",!0):(s(),u(w,{key:1,class:"column text-yellow-1 no-wrap"},{default:i(()=>[l("div",re,[l("div",null,y(e.$t(`${_}.account`)),1),l("div",ce,y(r.client_acc),1)])]),_:1})),d.value?v("",!0):(s(),u(K,{key:2,class:"mt-2",color:"yellow-12",size:"5px"})),d.value?v("",!0):(s(),u(A,{key:3},{default:i(()=>[l("div",null,[t(k,{class:"mr-2 text-h6",color:"white",label:e.$t("general.btn.edit"),onClick:a[0]||(a[0]=n=>B()),flat:"","no-caps":""},null,8,["label"])])]),_:1})),d.value?(s(),u(w,{key:4,class:"card-height"},{default:i(()=>[de,t(X,{class:"pa"})]),_:1})):v("",!0)]),_:1},8,["class"])):(s(),u(D,{key:1,class:"my-card bg-grey-4"},{default:i(()=>[t(w,{class:"column pb-0"},{default:i(()=>[l("div",ue,[me,l("div",null,[t(k,{class:"mr-2",color:"primary",label:e.$t("general.btn.add"),onClick:a[1]||(a[1]=n=>z()),"no-caps":""},null,8,["label"])]),t(Y,{class:"my-4"})])]),_:1})]),_:1}))])]),t(H,{modelValue:m.value,"onUpdate:modelValue":a[8]||(a[8]=n=>m.value=n),persistent:""},{default:i(()=>[t(D,{style:{width:"450px"}},{default:i(()=>[t(w,null,{default:i(()=>[l("div",pe,[h.value==="add"?(s(),b("span",fe,y(C(o)(`${_}.addTtile`)),1)):v("",!0),h.value==="edit"?(s(),b("span",ve,y(C(o)(`${_}.editTtile`)),1)):v("",!0)]),t(G,{ref_key:"pageform",ref:Q,greedy:""},{default:i(()=>[l("div",_e,[l("div",ye,[t(E,{class:"",modelValue:c.value.client_acc,"onUpdate:modelValue":a[2]||(a[2]=n=>c.value.client_acc=n),modelModifiers:{trim:!0},"lazy-rules":"",rules:I.client_acc,placeholder:e.$t("general.form.inputPlaceholder"),label:e.$t(`${_}.account`)},null,8,["modelValue","rules","placeholder","label"])]),l("div",ge,[t(E,{class:"",type:x.value?"password":"text",modelValue:c.value.client_pass,"onUpdate:modelValue":a[4]||(a[4]=n=>c.value.client_pass=n),modelModifiers:{trim:!0},"lazy-rules":"",rules:I.client_pass,placeholder:e.$t("general.form.inputPlaceholder"),label:e.$t(`${_}.pawd`)},{append:i(()=>[t(V,{name:x.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[3]||(a[3]=n=>x.value=!x.value)},null,8,["name"])]),_:1},8,["type","modelValue","rules","placeholder","label"])])])]),_:1},512)]),_:1}),t(A,{align:"right"},{default:i(()=>[t(k,{color:"secondary",rounded:"",label:e.$t("general.btn.cancel"),disable:p.value,onClick:a[5]||(a[5]=n=>m.value=!1),"no-caps":""},null,8,["label","disable"]),h.value==="edit"?(s(),u(k,{key:0,color:"accent",rounded:"","no-caps":"",label:e.$t("general.btn.edit"),loading:p.value,onClick:a[6]||(a[6]=n=>q())},null,8,["label","loading"])):(s(),u(k,{key:1,color:"accent",rounded:"","no-caps":"",label:e.$t("general.btn.add"),loading:p.value,onClick:a[7]||(a[7]=n=>M())},null,8,["label","loading"]))]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Pe=N(he,[["__scopeId","data-v-65c58d6f"]]);export{Pe as default};
