import{Q as B}from"./QInput.3afb05c8.js";import{ar as E,r as u,f as _,o as O,q as m,as as p,k as o,p as t,s as d,x as f,cw as G,z as b,v as N,A as T,av as K,aM as q,F as x}from"./index.fb3f5ad5.js";import{Q as z}from"./QCardSection.4591ffd9.js";import{Q as L}from"./QCard.2b2d4094.js";import{Q as v}from"./QTd.417aa865.js";import{l as M,n as j,Q as R}from"./no-data.2e8b8955.js";import{u as U}from"./permission.2824d1cc.js";import{m as W,a as H}from"./aws.035e7a22.js";import{f as J}from"./table-filter.7923a56f.js";import{n as $}from"./notify.71f93eb9.js";import{u as X}from"./vue-i18n.runtime.f4bab15f.js";import"./use-timeout.6c0c86b6.js";import"./uid.42677368.js";import"./use-transition.97bade2a.js";import"./QSeparator.9cedb50e.js";import"./QList.e0faa10e.js";import"./QSelect.650daa0f.js";import"./QMenu.0d0ddedc.js";import"./position-engine.d6f8c41b.js";import"./selection.2af613b2.js";import"./use-portal.7095234a.js";import"./focusout.c6764dff.js";import"./QDialog.fc5c29ed.js";import"./rtl.b51694b1.js";import"./format.c860d4da.js";import"./QInnerLoading.4e21fbf1.js";import"./axios.a0958352.js";const Y={class:"row q-col-gutter-md"},Z={class:"col-12 col-sm-5"},ee={class:"col-12 col-sm-7 row items-end"},ae={key:0,class:"mb-4 row justify-end"},se={key:1,class:"null-h52-block"},le={key:0,class:"ma-10 pa-10"},n="resource.aws.securityGroup",oe={__name:"index",setup(te){const{t:s}=X(),g=U(),i=u(!0),k=_(()=>{const e=[{name:"name",align:"left",label:s(`${n}.name`),field:"GroupName",headerClasses:"table-header",classes:"table-body"},{name:"id",align:"left",label:s(`${n}.id`),field:"GroupId",headerClasses:"table-header",classes:"table-body"},{name:"vpc",align:"left",label:s(`${n}.vpc`),field:"VpcId",headerClasses:"table-header",classes:"table-body"},{name:"description",align:"left",label:s(`${n}.description`),field:"Description",headerClasses:"table-header",classes:"table-body"},{name:"in",align:"left",label:s(`${n}.in`),field:"uiFormatIn",headerClasses:"table-header",classes:"table-body"},{name:"out",align:"left",label:s(`${n}.out`),field:"uiFormatOut",headerClasses:"table-header",classes:"table-body"}];return g.role==="supervisor"&&e.push({name:"detail",align:"left",label:s("resource.aws.detail"),field:"detail",headerClasses:"table-header",classes:"table-body",filter:!1}),e}),I={rowsPerPage:10,sortBy:"",descending:!0},C=[0,10,20],c=u(""),h=u(""),y=()=>{h.value=c.value,r.value=[],w()},P=()=>{c.value="",F.value="all"},F=u("all"),Q=(e,a,l)=>J(l,e,a),S=_(()=>(r.value.forEach((e,a)=>{e.IpPermissions.length===0||e.IpPermissions.length!==1?r.value[a].uiFormatIn=`${e.IpPermissions.length} ${s(`${n}.items`)}`:r.value[a].uiFormatIn=`${e.IpPermissions.length} ${s(`${n}.item`)}`,e.IpPermissionsEgress.length===0||e.IpPermissionsEgress.length!==1?r.value[a].uiFormatOut=`${e.IpPermissionsEgress.length} ${s(`${n}.items`)}`:r.value[a].uiFormatOut=`${e.IpPermissionsEgress.length} ${s(`${n}.item`)}`}),r.value)),r=u([]),w=()=>{i.value=!0,W().then(e=>{r.value=e.data}).finally(()=>{i.value=!1})},D=()=>{H("/networks/security_groups").then(e=>{$("success",s("resource.aws.successfullyAsync"))}).catch(e=>{$("error",s("resource.aws.failed2Async"),e.response.data.detail)})},V=()=>!!(r.value.length===0&&i.value),A=e=>{window.open(e,"_blank")};return w(),O(()=>{}),(e,a)=>(m(),p(x,null,[o(L,{class:"bg-grey-11 shadow-1 mb-4 text-weight-medium"},{default:t(()=>[o(z,null,{default:t(()=>[d("div",Y,[d("div",Z,[d("div",null,f(e.$t("general.table.keyword")),1),o(B,{dense:"",placeholder:e.$t("general.table.enterKeyword"),modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=l=>c.value=l),onKeyup:a[1]||(a[1]=G(l=>y(),["enter"]))},null,8,["placeholder","modelValue"])]),d("div",ee,[o(b,{class:"mr-2",color:"primary",icon:"mdi-magnify",label:e.$t("general.btn.search"),onClick:a[2]||(a[2]=l=>y()),rounded:"","no-caps":""},null,8,["label"]),o(b,{color:"secondary",icon:"mdi-eraser",label:e.$t("general.btn.reset"),onClick:a[3]||(a[3]=l=>P()),rounded:"","no-caps":""},null,8,["label"])])])]),_:1})]),_:1}),N(g).role==="supervisor"?(m(),p("div",ae,[o(b,{class:"",color:"accent",icon:"mdi-cloud-sync-outline",label:e.$t("general.btn.schedule"),onClick:a[4]||(a[4]=l=>D()),rounded:"","no-caps":""},null,8,["label"])])):(m(),p("div",se)),o(R,{"card-class":"customer-table",rows:S.value,columns:k.value,"row-key":"id",loading:i.value,"loading-label":" ","hide-bottom":V(),pagination:I,"rows-per-page-options":C,filter:h.value,"filter-method":Q},{"body-cell-in":t(l=>[o(v,{class:"table-body"},{default:t(()=>[d("div",null,f(l.row.uiFormatIn),1)]),_:2},1024)]),"body-cell-out":t(l=>[o(v,{class:"table-body"},{default:t(()=>[d("div",null,f(l.row.uiFormatOut),1)]),_:2},1024)]),"body-cell-detail":t(l=>[o(v,{class:"table-body"},{default:t(()=>[o(b,{class:"mr-1",color:"primary",icon:"mdi-link-variant",size:"sm",rounded:"","no-caps":"",onClick:re=>A(l.row.detail_link)},null,8,["onClick"])]),_:2},1024)]),loading:t(()=>[T(o(M,null,null,512),[[K,i.value]])]),"bottom-row":t(()=>[i.value&&r.value.length===0?(m(),p("div",le)):q("",!0)]),"no-data":t(()=>[o(j)]),_:1},8,["rows","columns","loading","hide-bottom","filter"])],64))}};var Ee=E(oe,[["__scopeId","data-v-3934e444"]]);export{Ee as default};
