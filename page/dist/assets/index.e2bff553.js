import{Q as C}from"./QInput.3afb05c8.js";import{ar as q,aw as z,r as c,f as y,o as K,q as f,as as b,k as l,p as r,s as u,x as g,cw as L,A as M,z as _,y as V,B as I,av as H,n as O,aM as T,F as W,aO as G,aP as J}from"./index.fb3f5ad5.js";import{Q as X}from"./QCardActions.5afa793e.js";import{d,Q as Z,a as ee}from"./QPopupProxy.c8c25096.js";import{Q as ae}from"./QCardSection.4591ffd9.js";import{Q as te}from"./QCard.2b2d4094.js";import{Q as oe}from"./QTd.417aa865.js";import{n as le,Q as se,l as re}from"./no-data.2e8b8955.js";import{C as ne}from"./ClosePopup.74952a98.js";import{o as ie}from"./aws.035e7a22.js";import{f as de}from"./table-filter.7923a56f.js";import{f as ue}from"./format-time.e227a64b.js";import{u as me}from"./vue-i18n.runtime.f4bab15f.js";import"./use-timeout.6c0c86b6.js";import"./uid.42677368.js";import"./use-transition.97bade2a.js";import"./use-cache.b0833c75.js";import"./format.c860d4da.js";import"./QDialog.fc5c29ed.js";import"./QSeparator.9cedb50e.js";import"./use-portal.7095234a.js";import"./focusout.c6764dff.js";import"./QMenu.0d0ddedc.js";import"./position-engine.d6f8c41b.js";import"./selection.2af613b2.js";import"./QList.e0faa10e.js";import"./QSelect.650daa0f.js";import"./rtl.b51694b1.js";import"./QInnerLoading.4e21fbf1.js";import"./axios.a0958352.js";const ce=p=>(G("data-v-4207623a"),p=p(),J(),p),fe={class:"row q-col-gutter-md"},pe={class:"col-12 col-sm-4"},ve={class:"col-12 col-sm-4"},be={class:"col-12 col-sm-8 row justify-center"},ge=ce(()=>u("div",{class:"null-h52-block"},null,-1)),he={key:0,class:"text-green-8 row"},ye={key:1,class:"text-grey-8 row"},_e={key:0,class:"ma-10 pa-10"},n="resource.aws.ec2Log",De={__name:"index",setup(p){const{t:i,te:D}=me(),B=z(),m=c(!0),P=y(()=>[{name:"name",align:"left",label:i(`${n}.name`),field:"Name",headerClasses:"table-header",classes:"table-body"},{name:"instanceId",align:"left",label:i(`${n}.instanceId`),field:"InstanceId",headerClasses:"table-header",classes:"table-body"},{name:"action",align:"left",label:i(`${n}.action`),field:"formatAction",headerClasses:"table-header",classes:"table-body"},{name:"state",align:"left",label:i(`${n}.state`),field:"formatState",headerClasses:"table-header",classes:"table-body",sortable:!0},{name:"actionUser",align:"left",label:i(`${n}.actionUser`),field:"action_user",headerClasses:"table-header",classes:"table-body"},{name:"updateTime",align:"left",label:i(`${n}.updateTime`),field:"formatUpdateTime",headerClasses:"table-header",classes:"table-body",sortable:!0,filter:!1}]),x={rowsPerPage:10,sortBy:"updateTime",descending:!0},U=[0,10,20],v=c(""),$=c(""),w=Date.now(),Y=d.formatDate(d.subtractFromDate(w,{days:7}),"YYYY/MM/DD"),S=d.formatDate(w,"YYYY/MM/DD"),o=c({from:Y,to:S}),k=()=>{$.value=v.value,s.value=[],h()},A=()=>{v.value="",o.value={from:Y,to:S}},Q=y(()=>o.value!==null?typeof o.value=="object"?`${o.value.from}~${o.value.to}`:`${o.value}~${o.value}`:""),N=(e,a,t)=>de(t,e,a),R=y(()=>(s.value.forEach((e,a)=>{e.State===void 0?s.value[a].formatState="":s.value[a].formatState=D(`${n}.${e.State}`)?i(`${n}.${e.State}`):e.State,e.action===void 0?s.value[a].formatAction="":s.value[a].formatAction=D(`${n}.${e.action}`)?i(`${n}.${e.action}`):e.action,s.value[a].formatUpdateTime=ue(e.update_time)}),s.value)),s=c([]),E=()=>{setTimeout(()=>{B.path==="/aws-resource/ec2-log"&&h()},1e3*60)},h=()=>{m.value=!0;let e="";o.value===null?e="":typeof o.value=="object"?e=`?date_from=${d.formatDate(o.value.from,"YYYY-MM-DD")}&date_end=${d.formatDate(o.value.to,"YYYY-MM-DD")}`:e=`?date_from=${d.formatDate(o.value,"YYYY-MM-DD")}&date_end=${d.formatDate(o.value,"YYYY-MM-DD")}`;let a=!1;ie(e).then(t=>{s.value=t.data,t.data.forEach((j,$e)=>{j.State==="pending"&&(a=!0)}),a&&E()}).finally(()=>{m.value=!1})},F=()=>!!(s.value.length===0&&m.value);return h(),K(()=>{}),(e,a)=>(f(),b(W,null,[l(te,{class:"bg-grey-11 shadow-1 mb-4 text-weight-medium"},{default:r(()=>[l(ae,null,{default:r(()=>[u("div",fe,[u("div",pe,[u("div",null,g(e.$t("general.table.keyword")),1),l(C,{dense:"",placeholder:e.$t("general.table.enterKeyword"),modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=t=>v.value=t),onKeyup:a[1]||(a[1]=L(t=>k(),["enter"]))},null,8,["placeholder","modelValue"])]),u("div",ve,[u("div",null,g(e.$t("general.table.dateRange")),1),l(C,{dense:"",readonly:"",class:"cursor-pointer",modelValue:Q.value,"onUpdate:modelValue":a[3]||(a[3]=t=>Q.value=t)},{default:r(()=>[l(Z,{"transition-show":"scale","transition-hide":"scale",class:"s123"},{default:r(()=>[l(ee,{minimal:"",modelValue:o.value,"onUpdate:modelValue":a[2]||(a[2]=t=>o.value=t),mask:"YYYY/MM/DD",range:""},{default:r(()=>[l(X,{class:"q-pa-none",align:"around"},{default:r(()=>[M(l(_,{color:"secondary",label:e.$t("general.btn.close")},null,8,["label"]),[[ne]])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),u("div",be,[l(_,{class:"mr-2",color:"primary",icon:"mdi-magnify",label:e.$t("general.btn.search"),onClick:a[4]||(a[4]=t=>k()),rounded:"","no-caps":""},null,8,["label"]),l(_,{color:"secondary",icon:"mdi-eraser",label:e.$t("general.btn.reset"),onClick:a[5]||(a[5]=t=>A()),rounded:"","no-caps":""},null,8,["label"])])])]),_:1})]),_:1}),ge,l(se,{"card-class":"customer-table",rows:R.value,columns:P.value,"row-key":"id",loading:m.value,"loading-label":" ","hide-bottom":F(),pagination:x,"rows-per-page-options":U,filter:$.value,"filter-method":N},{"body-cell-state":r(t=>[l(oe,{class:"table-body"},{default:r(()=>[t.row.State==="completed"?(f(),b("div",he,[l(V,{size:"24px",name:"mdi-check-circle-outline"}),I(" "+g(t.row.formatState),1)])):(f(),b("div",ye,[l(V,{size:"24px",name:"mdi-minus-circle-outline"}),I(" "+g(t.row.formatState),1)]))]),_:2},1024)]),loading:r(()=>[s.value.length===0?M((f(),O(re,{key:0},null,512)),[[H,m.value]]):T("",!0)]),"bottom-row":r(()=>[m.value&&s.value.length===0?(f(),b("div",_e)):T("",!0)]),"no-data":r(()=>[l(le)]),_:1},8,["rows","columns","loading","hide-bottom","filter"])],64))}};var Ze=q(De,[["__scopeId","data-v-4207623a"]]);export{Ze as default};
